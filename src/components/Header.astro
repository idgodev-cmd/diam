---
const pathname = new URL(Astro.request.url).pathname;
// Helper buat ngecek halaman aktif (buat styling icon)
const isActive = (path: string) => pathname === path || (path !== '/' && pathname.startsWith(path));
---

<!-- HEADER DESKTOP (Top Bar) -->
<header class="fixed top-0 w-full z-40 bg-paper/90 dark:bg-dark-bg/90 backdrop-blur-sm border-b border-gray-200 dark:border-gray-800 transition-colors duration-300">
    <div class="max-w-5xl mx-auto px-6 h-16 flex justify-between items-center">
        <!-- Logo -->
        <a href="/" aria-label="Kembali ke Beranda" class="font-display font-bold text-lg tracking-tight hover:text-gray-600 dark:hover:text-gray-300 transition-colors">
            Diam<span class="text-accent">.</span>
        </a>

        <!-- Desktop Nav Links -->
        <nav class="hidden md:flex items-center gap-6 text-sm font-medium">
            <a href="/" class={`hover:underline decoration-accent decoration-2 underline-offset-4 ${isActive('/') ? 'text-ink font-bold dark:text-white' : 'text-gray-500'}`}>Jurnal</a>
            <a href="/about" class={`hover:underline decoration-accent decoration-2 underline-offset-4 ${isActive('/about') ? 'text-ink font-bold dark:text-white' : 'text-gray-500'}`}>Tentang Saya</a>
            
            <!-- Theme Toggle Desktop -->
            <!-- Added aria-label for Accessibility/SEO -->
            <button id="theme-toggle-desktop" aria-label="Ganti Mode Gelap/Terang" class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-accent/20 transition-colors">
                <i class="ph-bold ph-sun hidden dark:block"></i>
                <i class="ph-bold ph-moon block dark:hidden"></i>
            </button>
        </nav>
    </div>
</header>

<!-- MOBILE NAVIGATION DOCK (Bottom Bar) -->
<nav class="md:hidden fixed bottom-6 left-1/2 -translate-x-1/2 z-50 transition-all duration-300">
    <div class="flex items-center gap-1 bg-white/90 dark:bg-dark-card/90 backdrop-blur-md border border-gray-200 dark:border-gray-700 p-2 rounded-full shadow-2xl shadow-gray-200/50 dark:shadow-black/50 ring-1 ring-black/5">
        
        <!-- Home Button -->
        <!-- Added aria-label because icon-only links need description -->
        <a href="/" aria-label="Beranda" class={`w-12 h-12 flex flex-col items-center justify-center rounded-full transition-all active:scale-95 ${isActive('/') ? 'text-ink dark:text-white bg-gray-100 dark:bg-gray-800' : 'text-gray-400 hover:text-ink hover:bg-gray-50'}`}>
            <i class="ph-bold ph-book-open text-xl"></i>
        </a>

        <!-- About Button -->
        <!-- Added aria-label -->
        <a href="/about" aria-label="Tentang Saya" class={`w-12 h-12 flex flex-col items-center justify-center rounded-full transition-all active:scale-95 ${isActive('/about') ? 'text-ink dark:text-white bg-gray-100 dark:bg-gray-800' : 'text-gray-400 hover:text-ink hover:bg-gray-50'}`}>
            <i class="ph-bold ph-user text-xl"></i>
        </a>

        <div class="w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"></div>

        <!-- Theme Toggle Mobile -->
        <!-- Added aria-label -->
        <button id="theme-toggle-mobile" aria-label="Ganti Tema" class="w-12 h-12 flex flex-col items-center justify-center rounded-full text-gray-400 hover:text-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-all active:scale-95 active:rotate-45">
             <i class="ph-bold ph-sun hidden dark:block text-xl"></i>
             <i class="ph-bold ph-moon block dark:hidden text-xl"></i>
        </button>
    </div>
</nav>

<script>
    const handleToggleClick = () => {
        const element = document.documentElement;
        element.classList.toggle("dark");
        const isDark = element.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    document.getElementById("theme-toggle-desktop")?.addEventListener("click", handleToggleClick);
    document.getElementById("theme-toggle-mobile")?.addEventListener("click", handleToggleClick);
</script>