---
import '../styles/global.css'; 

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="id" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Catatan pinggir tentang kehidupan." />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- FONTS -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Plus+Jakarta+Sans:wght@500;700;800&family=Patrick+Hand&display=swap" rel="stylesheet">
		
		<!-- ICONS (PENTING BIAR NAVBAR MUNCUL) -->
		<script src="https://unpkg.com/@phosphor-icons/web"></script>

		<title>{title} | Catatan Pinggir</title>

		<script is:inline>
			const theme = (() => {
				if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
					return localStorage.getItem('theme');
				}
				if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
					return 'dark';
				}
				return 'light';
			})();
		
			if (theme === 'dark') {
				document.documentElement.classList.add('dark');
			} else {
				document.documentElement.classList.remove('dark');
			}
		</script>
	</head>
	<body class="bg-paper text-ink dark:bg-dark-bg dark:text-dark-text transition-colors duration-300 selection:bg-accent selection:text-ink pb-32 md:pb-20 tracking-wide font-sans antialiased">
		
		<!-- Progress Bar -->
		<div id="reading-progress" class="fixed top-0 left-0 h-1 bg-accent z-50 w-0 transition-all duration-100"></div>

		<!-- Texture Overlay -->
		<div class="fixed inset-0 pointer-events-none z-40 opacity-[0.04] mix-blend-overlay bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"></div>

		<slot />

		<script>
			window.addEventListener('scroll', () => {
				const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
				const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
				const scrolled = (winScroll / height) * 100;
				const bar = document.getElementById("reading-progress");
				if(bar) bar.style.width = scrolled + "%";
			});
		</script>
	</body>
</html>